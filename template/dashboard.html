{% extends "base.html" %}
{% load static %}  

    {% block content %}

    <style>
        .file-upload-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh; /* Adjust height as needed */
        }
    
        .custom-file-upload {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: #007bff;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
            width: fit-content;
        }
    
        .custom-file-upload:hover {
            background-color: #0056b3;
        }
    
        .custom-file-upload input {
            display: none;
        }
    
        .file-name {
            margin-top: 10px;
            font-size: 14px;
            color: #333;
            text-align: center;
        }
    </style>
        <div class="page-wrapper">
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
             <div class="page-breadcrumb">
                <div class="row">
                    <div class="col-12 d-flex no-block align-items-center">
                        <h4 class="page-title">Dashboard</h4>
                        <div class="ml-auto text-right">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">Library</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Sales Cards  -->
                <!-- ============================================================== -->
                <div class="row">
                    <!-- Column -->
                    <div class="col-md-6 col-lg-2 col-xlg-3">
                        <div class="card card-hover">
                            <div class="box bg-cyan text-center">
                                <h1 class="font-light text-white"><i class="mdi mdi-view-dashboard"></i></h1>
                                <h6 class="text-white">Dashboard</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <div class="col-md-6 col-lg-4 col-xlg-3">
                        <div class="card card-hover">
                            <div class="box bg-success text-center">
                                <h1 class="font-light text-white"><i class="mdi mdi-chart-areaspline"></i></h1>
                                <h6 class="text-white">Charts</h6>
                            </div>
                        </div>
                    </div>
                     <!-- Column -->
                    <div class="col-md-6 col-lg-2 col-xlg-3">
                        <div class="card card-hover">
                            <div class="box bg-warning text-center">
                                <h1 class="font-light text-white"><i class="mdi mdi-collage"></i></h1>
                                <h6 class="text-white">Widgets</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <div class="col-md-6 col-lg-2 col-xlg-3">
                        <div class="card card-hover">
                            <div class="box bg-danger text-center">
                                <h1 class="font-light text-white"><i class="mdi mdi-border-outside"></i></h1>
                                <h6 class="text-white">Tables</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <div class="col-md-6 col-lg-2 col-xlg-3">
                        <div class="card card-hover">
                            <div class="box bg-info text-center">
                                <h1 class="font-light text-white"><i class="mdi mdi-arrow-all"></i></h1>
                                <h6 class="text-white">Full Width</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <!-- Column -->
                    <div class="col-md-6 col-lg-4 col-xlg-3">
                        <div class="card card-hover">
                            <div class="box bg-danger text-center">
                                <h1 class="font-light text-white"><i class="mdi mdi-receipt"></i></h1>
                                <h6 class="text-white">Forms</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <div class="col-md-6 col-lg-2 col-xlg-3">
                        <div class="card card-hover">
                            <div class="box bg-info text-center">
                                <h1 class="font-light text-white"><i class="mdi mdi-relative-scale"></i></h1>
                                <h6 class="text-white">Buttons</h6>
                            </div>
                        </div>
                    </div>
                     <!-- Column -->
                    <div class="col-md-6 col-lg-2 col-xlg-3">
                        <div class="card card-hover">
                            <div class="box bg-cyan text-center">
                                <h1 class="font-light text-white"><i class="mdi mdi-pencil"></i></h1>
                                <h6 class="text-white">Elements</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <div class="col-md-6 col-lg-2 col-xlg-3">
                        <div class="card card-hover">
                            <div class="box bg-success text-center">
                                <h1 class="font-light text-white"><i class="mdi mdi-calendar-check"></i></h1>
                                <h6 class="text-white">Calnedar</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <div class="col-md-6 col-lg-2 col-xlg-3">
                        <div class="card card-hover">
                            <div class="box bg-warning text-center">
                                <h1 class="font-light text-white"><i class="mdi mdi-alert"></i></h1>
                                <h6 class="text-white">Errors</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                </div>
                <!-- ============================================================== -->
                <!-- Sales chart -->
                <!-- ============================================================== -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-md-flex align-items-center">
                                    <div>
                                        <h4 class="card-title">Site Analysis</h4>
                                        <h5 class="card-subtitle">Overview of Latest Month</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <!-- column -->
                                    <div class="col-lg-9">
                                        <div class="flot-chart">
                                            <div class="flot-chart-content" id="flot-line-chart"></div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="bg-dark p-10 text-white text-center">
                                                   <i class="fa fa-user m-b-5 font-16"></i>
                                                   <h5 class="m-b-0 m-t-5">{{ user_count }}</h5>
                                                   <small class="font-light">Total Users</small>
                                                </div>
                                            </div>
                                             <div class="col-6">
                                                <div class="bg-dark p-10 text-white text-center">
                                                   <i class="fa fa-plus m-b-5 font-16"></i>
                                                   <h5 class="m-b-0 m-t-5">{{ new_users }}</h5>
                                                   <small class="font-light">New Users</small>
                                                </div>
                                            </div>
                                            <div class="col-6 m-t-15">
                                                <div class="bg-dark p-10 text-white text-center">
                                                   <i class="fa fa-cart-plus m-b-5 font-16"></i>
                                                   <h5 class="m-b-0 m-t-5">656</h5>
                                                   <small class="font-light">Total Shop</small>
                                                </div>
                                            </div>
                                             <div class="col-6 m-t-15">
                                                <div class="bg-dark p-10 text-white text-center">
                                                   <i class="fa fa-tag m-b-5 font-16"></i>
                                                   <h5 class="m-b-0 m-t-5">9540</h5>
                                                   <small class="font-light">Total Orders</small>
                                                </div>
                                            </div>
                                            <div class="col-6 m-t-15">
                                                <div class="bg-dark p-10 text-white text-center">
                                                   <i class="fa fa-table m-b-5 font-16"></i>
                                                   <h5 class="m-b-0 m-t-5">100</h5>
                                                   <small class="font-light">Pending Orders</small>
                                                </div>
                                            </div>
                                            <div class="col-6 m-t-15">
                                                <div class="bg-dark p-10 text-white text-center">
                                                   <i class="fa fa-globe m-b-5 font-16"></i>
                                                   <h5 class="m-b-0 m-t-5">8540</h5>
                                                   <small class="font-light">Online Orders</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- column -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ============================================================== -->
                <!-- Sales chart -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Recent comment and chats -->
                <!-- ============================================================== -->
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Update Logo</title>
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .custom-file-upload {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: #007bff;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
            width: fit-content;
        }

        .custom-file-upload:hover {
            background-color: #0056b3;
        }

        .custom-file-upload input {
            display: none;
        }

        .file-name {
            margin-top: 10px;
            font-size: 14px;
            color: #333;
            text-align: center;
        }

        .logo-preview {
            margin-top: 15px;
            max-width: 200px;
            max-height: 200px;
        }

        #titleContainer {
            display: none;
            margin-top: 10px;
        }
    </style>
                </head>
                <body>
                
                    <div class="container text-center mt-5">
                        <h2>Update Website Logo</h2>
                        <form action="" method="POST" enctype="multipart/form-data" class="mt-4">
                            {% csrf_token %}
                            
                            <!-- File Upload -->
                            <div class="d-flex justify-content-center">
                                <label for="logoUpload" class="custom-file-upload">
                                    📂 Upload Logo
                                    <input type="file" id="logoUpload" name="logo" accept="image/*" onchange="displayFileName()">
                                </label>
                            </div>
                            <span class="file-name" id="fileName">No file chosen</span>
                
                            <!-- Logo Preview -->
                            <div>
                                <img id="logoPreview" class="logo-preview img-thumbnail" 
                                     src="{{ settings.logo.url }}" alt="Current Logo">
                            </div>
                
                            <!-- Add Title Button -->
                            <button type="button" class="btn btn-secondary mt-3" onclick="showTitleInput()">Add Title</button>
                
                            <!-- Title Input Field (Initially Hidden) -->
                            <div id="titleContainer">
                                <input type="text" id="logoTitle" name="logoTitle" class="form-control mt-2" placeholder="Enter logo title" value="{{settings.title}}">
                            </div>
                
                            <!-- Submit Button -->
                            <button type="submit" class="btn btn-primary mt-3">Upload</button>
                        </form>
                    </div>
                
                <script>
                    function displayFileName() {
                        const input = document.getElementById('logoUpload');
                        const fileName = document.getElementById('fileName');
                        fileName.textContent = input.files.length > 0 ? input.files[0].name : "No file chosen";
            
                        // Display image preview
                        const logoPreview = document.getElementById('logoPreview');
                        const file = input.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = function (e) {
                                logoPreview.src = e.target.result;
                            };
                            reader.readAsDataURL(file);
                        }
                    }
            
                    function showTitleInput() {
                        document.getElementById('titleContainer').style.display = "block";
                    }
                </script>
                <script>
                    function displayFileName() {
                        const input = document.getElementById('logoUpload');
                        const fileName = document.getElementById('fileName');
                        fileName.textContent = input.files.length > 0 ? input.files[0].name : "No file chosen";
                    }
                </script>
                <script>
                    $(function () {
                        var data = [
                            [0, 15], [11, 15], [12, 10], [13, 20], [14, 30] 
                        ];
            
                        $.plot($("#flot-line-chart"), [{
                            data: data,
                            lines: { show: true, lineWidth: 3, fill: true, fillColor: "rgba(0, 150, 255, 0.3)" },
                            points: { show: true, radius: 5 },
                            color: "#0096FF"
                        }], {
                            grid: { backgroundColor: { colors: ["#fff", "#eee"] } },
                            xaxis: { tickDecimals: 0, tickSize: 1 },
                            yaxis: { min: 0, max: 50 }
                        });
                    });
                </script>
                </body>
    {% endblock content %}